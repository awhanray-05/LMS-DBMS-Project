{"ast":null,"code":"import axios from'axios';const API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';// Create axios instance\nconst api=axios.create({baseURL:API_BASE_URL,headers:{'Content-Type':'application/json'}});// Request interceptor to add auth token\napi.interceptors.request.use(config=>{const token=localStorage.getItem('token');if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;},error=>{return Promise.reject(error);});// Response interceptor to handle errors\napi.interceptors.response.use(response=>response,error=>{var _error$response;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){var _error$config,_error$config$url;// Only redirect if it's not the login endpoint\nconst isLoginEndpoint=(_error$config=error.config)===null||_error$config===void 0?void 0:(_error$config$url=_error$config.url)===null||_error$config$url===void 0?void 0:_error$config$url.includes('/auth/login');if(!isLoginEndpoint){console.error('Unauthorized access, redirecting to login');localStorage.removeItem('token');localStorage.removeItem('user');window.location.href='/login';}}return Promise.reject(error);});// Auth API\nexport const authAPI={login:credentials=>api.post('/auth/login',credentials),logout:()=>api.post('/auth/logout'),getProfile:()=>api.get('/auth/profile'),changePassword:data=>api.put('/auth/change-password',data)};// Books API\nexport const booksAPI={getBooks:params=>api.get('/books',{params}),getBookById:id=>api.get(\"/books/\".concat(id)),createBook:data=>api.post('/books',data),updateBook:(id,data)=>api.put(\"/books/\".concat(id),data),deleteBook:id=>api.delete(\"/books/\".concat(id)),searchBooks:data=>api.post('/books/search',data)};// Members API\nexport const membersAPI={getMembers:params=>api.get('/members',{params}),getMemberById:id=>api.get(\"/members/\".concat(id)),createMember:data=>api.post('/members',data),updateMember:(id,data)=>api.put(\"/members/\".concat(id),data),deleteMember:id=>api.delete(\"/members/\".concat(id)),getMemberTransactions:(id,params)=>api.get(\"/members/\".concat(id,\"/transactions\"),{params}),getMemberBorrowedBooks:id=>api.get(\"/members/\".concat(id,\"/borrowed-books\"))};// Transactions API\nexport const transactionsAPI={getTransactions:params=>api.get('/transactions',{params}),getOverdueBooks:()=>api.get('/transactions/overdue'),issueBook:data=>api.post('/transactions/issue',data),returnBook:transactionId=>api.put(\"/transactions/return/\".concat(transactionId)),getFineHistory:memberId=>api.get(\"/transactions/fines/\".concat(memberId)),payFine:fineId=>api.put(\"/transactions/fines/\".concat(fineId,\"/pay\"))};// Dashboard API\nexport const dashboardAPI={getStats:()=>api.get('/dashboard/stats'),getRecentTransactions:()=>api.get('/dashboard/recent-transactions'),getOverdueBooks:()=>api.get('/dashboard/overdue-books')};export default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","api","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","concat","error","Promise","reject","response","_error$response","status","_error$config","_error$config$url","isLoginEndpoint","url","includes","console","removeItem","window","location","href","authAPI","login","credentials","post","logout","getProfile","get","changePassword","data","put","booksAPI","getBooks","params","getBookById","id","createBook","updateBook","deleteBook","delete","searchBooks","membersAPI","getMembers","getMemberById","createMember","updateMember","deleteMember","getMemberTransactions","getMemberBorrowedBooks","transactionsAPI","getTransactions","getOverdueBooks","issueBook","returnBook","transactionId","getFineHistory","memberId","payFine","fineId","dashboardAPI","getStats","getRecentTransactions"],"sources":["C:/Drive_D/IIITDM_Kurnool_College_Materials/3rd_Year/5th_Sem/DBMS_PROJECT_NEW/LMS-DBMS/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n// Create axios instance\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Request interceptor to add auth token\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor to handle errors\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401) {\n      // Only redirect if it's not the login endpoint\n      const isLoginEndpoint = error.config?.url?.includes('/auth/login');\n      if (!isLoginEndpoint) {\n        console.error('Unauthorized access, redirecting to login');\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n        window.location.href = '/login';\n      }\n    }\n    return Promise.reject(error);\n  }\n);\n\n// Auth API\nexport const authAPI = {\n  login: (credentials) => api.post('/auth/login', credentials),\n  logout: () => api.post('/auth/logout'),\n  getProfile: () => api.get('/auth/profile'),\n  changePassword: (data) => api.put('/auth/change-password', data),\n};\n\n// Books API\nexport const booksAPI = {\n  getBooks: (params) => api.get('/books', { params }),\n  getBookById: (id) => api.get(`/books/${id}`),\n  createBook: (data) => api.post('/books', data),\n  updateBook: (id, data) => api.put(`/books/${id}`, data),\n  deleteBook: (id) => api.delete(`/books/${id}`),\n  searchBooks: (data) => api.post('/books/search', data),\n};\n\n// Members API\nexport const membersAPI = {\n  getMembers: (params) => api.get('/members', { params }),\n  getMemberById: (id) => api.get(`/members/${id}`),\n  createMember: (data) => api.post('/members', data),\n  updateMember: (id, data) => api.put(`/members/${id}`, data),\n  deleteMember: (id) => api.delete(`/members/${id}`),\n  getMemberTransactions: (id, params) => api.get(`/members/${id}/transactions`, { params }),\n  getMemberBorrowedBooks: (id) => api.get(`/members/${id}/borrowed-books`),\n};\n\n// Transactions API\nexport const transactionsAPI = {\n  getTransactions: (params) => api.get('/transactions', { params }),\n  getOverdueBooks: () => api.get('/transactions/overdue'),\n  issueBook: (data) => api.post('/transactions/issue', data),\n  returnBook: (transactionId) => api.put(`/transactions/return/${transactionId}`),\n  getFineHistory: (memberId) => api.get(`/transactions/fines/${memberId}`),\n  payFine: (fineId) => api.put(`/transactions/fines/${fineId}/pay`),\n};\n\n// Dashboard API\nexport const dashboardAPI = {\n  getStats: () => api.get('/dashboard/stats'),\n  getRecentTransactions: () => api.get('/dashboard/recent-transactions'),\n  getOverdueBooks: () => api.get('/dashboard/overdue-books'),\n};\n\nexport default api;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}